import React, { useEffect } from 'react';
import styles from './app.module.css';
import { Chat } from './components/chat';
import { Input } from './components/input';
import { useMessages } from './useMessages';
import { NavBar } from './components/navbar';
import closeIcon from './icons/close.svg';
import { IconButton } from './components/icon-button';
import Markdown from 'react-markdown';

export const App = () => {
  const {
    appendMessage,
    sendMessage,
    messages,
    waiting,
    suggestions,
    resetMessages,
    initSuggestions,
    selectMessage,
    selectedMessage,
  } = useMessages();

  useEffect(() => {
    initSuggestions();
  }, []);

  const report = `What year or years does the information refer too?\n\n   The information refers to the years 2023–2024.\n\n3. Summarise in one sentence what the document is about?\n\n   The document is about McDonald’s Corporation's Purpose & Impact Report for the years 2023–2024, detailing the company's initiatives and progress in environmental, social, and governance (ESG) areas.\n\n## ESG (Environment, Social, Governance):\n\n### Environmental:\n\n#### 1. Which aspects of ESG does this document primarily discuss, respond with a percentage of each topic covered by the document.\n\n   The document primarily discusses the following aspects of ESG:\n   - Environmental: 45%\n   - Social: 35%\n   - Governance: 20%\n\n#### 2. What environmental goals does this document describe?\n\n   The document describes the following environmental goals:\n   - Achieving net-zero emissions by 2050.\n   - Reducing Scope 1 and 2 GHG emissions by 50.4% by 2030 from a 2018 base year.\n   - Reducing absolute Scope 3 energy and industrial GHG emissions by 50.4% from Franchisee and Company-owned and operated restaurants, and the facility, logistics and plastic packaging emissions in the supply chain by 2030 from a 2018 base year.\n   - Maintain no deforestation across its primary deforestation-linked commodities.\n   - Achieve a 16% reducion in Scope 3 FLAG GHG emissions by 2030 from a 2018 base year.\n   - Reduce the use of virgin fossil fuel-based plastics in Happy Meal toys by 63.7% by the end of 2023.\n   - Eliminate the use of antibiotics defined by the WHO as Highest Priority Critically Important Antibiotics (HPCIAs) to human medicine from all chicken served in in-scope markets by the end of 2027.\n   - Phase out the use of gestation stalls for housing pregnant sows in the U.S. by the end of 2024.\n\n#### 3. What beneficial environmental claims does the company make?\n\n   The company makes the following beneficial environmental claims:\n   - McDonald’s is committed to adapting the Company’s climate target to help keep global temperature rises below 1.5°C and reach net zero emissions by 2050.\n   - McDonald’s has signed multiple renewable energy projects through Virtual Power Purchase Agreements (VPPAs) and continues to be among other leading corporate renewable energy buyers in adding new, large-scale renewable energy to the U.S. grid.\n   - McDonald’s is committed to embedding sustainability commitments into global sourcing decisions for food and packaging through Global Sustainable Sourcing Specifications and direct collaboration on sustainable initiatives.\n   - McDonald’s is committed to a responsile antibiotic use approach – refining antibiotic selection and administration, reducing non-therapeutic antibiotic use and, when possible, replacing antibiotics with long-term solutions to prevent diseases and protect animal health and welfare.\n\n#### 4. What potential environment greenwashing can you identify that should be fact checked?\n\n   Potential environment greenwashing that should be fact checked include:\n   - The company’s claim of reducing Scope 1 and 2 GHG emissions by 50.4% by 2030 from a 2018 base year should be verified by independent third-party auditors.\n   - The company’s claim of achieveng a 16% reducion in Scope 3 FLAG GHG emissions by 2030 from a 2018 base year should be verified by independent third-party auditors.\n   - The company’s claim of reducing the use of virgin fossil fuel-based plastics in Happy Meal toys by 63.7% by the end of 2023 should be verified by independent third-party auditors.\n   - The company’s claim of eliminating the use of antibiotics defined by the WHO as Highest Priority Critically Important Antibiotics (HPCIAs) to human medicine from all chicken served in in-scope markets by the end of 2027 should be verified by independent third-party auditors.\n   - The company’s claim of phasing out the use of gestation stalls for housing pregnant sows in the U.S. by the end of 2024 should be verified by independent third-party auditors.\n\n#### 5. What environmental regulations, standards or certifications can you identify in the document?\n\n   The document identifies the following environmental regulations, standards or certifications:\n   - The Science Based Targets initiative (SBTi)\n   - The Global Roundtable for Sustainable Beef (GRSB)\n   - The Sustainable Fisheries Partnership\n   - The Marine Stewardship Council (MSC) Principles and Criteria for Sustainable Fishing\n   - The Forest Stewardship Council® (FSC®) certification\n   - The Rainforest Alliance Certification\n   - The Roundtable on Sustainable Palm Oil (RSPO) certification\n   - ISO 14021:2016 for plastic\n   - ASTM 6866 or ISO 16620-2 for fiber-based packaging\n\n### Social:\n\n#### 1. What social goals does this document describe?\n\n   The document describes the following social goals:\n   - Achieve 100% cage-free eggs in the U.S. by 2025 – two years ahead of schedule.\n   - Reduce barriers to employment for 2 million young people by the end of 2025.\n   - Achieve 45% representation of women in leadership roles globally by the end of 2030.\n   - Achieve 35% representation of Underrepresented Groups in leadership roles in the U.S. by the end of 2025.\n   - Close pay gaps identified in annual equal pay analyses for women globally and for Underrepresented Groups in the U.S. by the end of 2024.\n\n#### 2. What beneficial societal claims does the company make?\n\n   The company makes the following beneficial societal claims:\n   - McDonald’s is committed to fostering inclusive workplaces where employees feel empowered to pursue their career aspirations with access to opportunity.\n   - McDonald’s is committed to providing a best-in-class employee experience – where people are given opportunities to learn and develop – is a business imperative.\n   - McDonald’s is committed to supporting meaningful causes and has a long history of giving back to the community through philanthropic donations and employee volunter programs.\n   - McDonald’s is committed to embedding sustainability commitments into global sourcing decisions for food and packaging through Global Sustainable Sourcing Specifications and direct collaboration on sustainable initiatives.\n\n#### 3. What potential societal greenwashing can you identify that should be fact checked?\n\n   Potential societal greenwashing that should be fact checked include:\n   - The company’s claim of achieveng 100% cage-free eggs in the U.S. by 2025 should be verified by independent third-party auditors.\n   - The company’s claim of reducing barriers to employment for 2 million young people by the end of 2025 should be verified by independent third-party auditors.\n   - The company’s claim of achieveng 45% representation of women in leadership roles globally by the end of 2030 should be verified by independent third-party auditors.\n   - The company’s claim of achieveng 35% representation of Underrepresented Groups in leadership roles in the U.S. by the end of 2025 should be verified by independent third-party auditors.\n   - The company’s claim of closing pay gaps identified in annual equal pay analyses for women globally and for Underrepresented Groups in the U.S. by the end of 2024 should be verified by independent third-party auditors.\n\n#### 4. What societal regulations, standards or certifications can you identify in the document?\n\n   The document identifies the following societal regulations, standards or certifications:\n   - The Sustainable Fisheries Partnership\n   - The Marine Stewardship Council (MSC) Principles and Criteria for Sustainable Fishing\n   - The Forest Stewardship Council® (FSC®) certification\n   - The Rainforest Alliance Certification\n   - The Roundtable on Sustainable Palm Oil (RSPO) certification\n   - ISO 14021:2016 for plastic\n   - ASTM 6866 or ISO 16620-2 for fiber-based packaging\n\n### Governance:\n\n#### 1. What governance goals does this document describe?\n\n   The document describes the following governance goals:\n   - McDonald’s is committed to embedding sustainability commitments into global sourcing decisions for food and packaging through Global Sustainable Sourcing Specifications and direct collaboration on sustainable initiatives.\n   - McDonald’s is committed to a responsile antibiotic use approach – refining antibiotic selection and administration, reducing non-therapeutic antibiotic use and, when possible, replacing antibiotics with long-term solutions to prevent diseases and protect animal health and welfare.\n\n#### 2. What beneficial governance claims does the company make?\n\n   The company makes the following beneficial governance claims:\n   - McDonald’s is committed to embedding sustainability commitments into global sourcing decisions for food and packaging through Global Sustainable Sourcing Specifications and direct collaboration on sustainable initiatives.\n   - McDonald’s is committed to a responsile antibiotic use approach – refining antibiotic selection and administration, reducing non-therapeutic antibiotic use and, when possible, replacing antibiotics with long-term solutions to prevent diseases and protect animal health and welfare.\n\n#### 3. What potential governance greenwashing can you identify that should be fact checked?\n\n   Potential governance greenwashing that should be fact checked include:\n   - The company’s claim of embedding sustainability commitments into global sourcing decisions for food and packaging through Global Sustainable Sourcing Specifications and direct collaboration on sustainable initiatives should be verified by independent third-party auditors.\n   - The company’s claim of a responsile antibiotic use approach – refining antibiotic selection and administration, reducing non-therapeutic antibiotic use and, when possible, replacing antibiotics with long-term solutions to prevent diseases and protect animal health and welfare should be verified by independent third-party auditors.\n\n#### 4. What governance regulations, standards or certifications can you identify in the document?\n\n   The document identifies the following governance regulations, standards or certifications:\n   - The Sustainable Fisheries Partnership\n   - The Marine Stewardship Council (MSC) Principles and Criteria for Sustainable Fishing\n   - The Forest Stewardship Council® (FSC®) certification\n   - The Rainforest Alliance Certification\n   - The Roundtable on Sustainable Palm Oil (RSPO) certification\n   - ISO 14021:2016 for plastic\n   - ASTM 6866 or ISO 16620-2 for fiber-based packaging\n\n## Conclusion:\n\n### 1. What is your conclusion about the claims and potential greenwashing in this document?\n\n   The document makes several ambitious claims about McDonald’s Corporation's environmental, social, and governance initiatives and goals. While the company has made significant progress in some areas, such as reducing GHG emissions and sourcing sustainable commodities, there are several potential greenwashing concerns that should be fact checked. These include the company’s claims of achieveng net-zero emissions by 2050, eliminating the use of antibiotics in chicken, and achieveng 100% cage-free eggs in the U.S. by 2025. Independent third-party auditors should verify these claims to ensure their accuracy and credibility.\n\n### 2. What are your recommended next steps to verify any of the claims in this document?\n\n   To verify the claims made in the document, the following steps should be taken:\n   - Commission independent third-party auditors to verify the company’s claims of reducing GHG emissions, sourcing sustainable commodities, achieveng net-zero emissions by 2050, eliminating the use of antibiotics in chicken, and achieveng 100% cage-free eggs in the U.S. by 2025.\n   - Conduct a thorough review of the company’s supply chain to ensure that it is free of deforestation and that all commodities are sourced sustainably.\n   - Evaluate the effectiveness of the company’s community engagement and philanthropic initiatives to ensure that they are having a positive impact on the communities in which McDonald’s operates.\n   - Assess the company’s progress towards its diversity, equity, and inclusion goals, and ensure that it is providing equal opportunities for all employees, regardless of their background.\n\n   By taking these steps, McDonald’s Corporation can ensure that its ESG initiatives are having a genuine and meaningful impact on the environment, society, and the company’s governance.`;

  return (
    <>
      <NavBar startNewConversation={resetMessages} />
      <div className={styles.container}>
        {/* {selectedMessage && ( */}
        <div className={styles.column}>
          <div className={styles.sidepanel}>
            <div className={styles.close_container}>
              <IconButton
                icon={closeIcon}
                altText="Close"
                onClick={() => selectMessage(null)}
              />
            </div>
            {/* <p>id: {selectedMessage.id}</p>
              <p>message: {selectedMessage.content}</p>
              <p>time: {selectedMessage.time}</p>
              <p>report: {selectedMessage.report}</p> */}
            <Markdown>{report}</Markdown>
          </div>
        </div>
        {/* )} */}
        <div className={styles.column}>
          <div className={styles.chatContainer}>
            <Chat
              messages={messages}
              waiting={waiting}
              selectedMessage={selectedMessage}
              selectMessage={selectMessage}
            />
            <Input
              key={messages?.[0]?.time}
              sendMessage={sendMessage}
              waiting={waiting}
              suggestions={suggestions}
              appendMessage={appendMessage}
            />
          </div>
        </div>
      </div>
    </>
  );
};
